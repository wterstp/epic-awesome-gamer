name: epic-awesome-gamer

services:
  epic-awesome-gamer:
    # ğŸ”´ ç¡®ä¿è¿™æ˜¯æ‚¨è‡ªå·±çš„é•œåƒåœ°å€
    image: ghcr.io/10000ge10000/epic-awesome-gamer:latest
    
    restart: "no"
    container_name: epic-awesome-gamer
    
    # âœ… [æ ¸å¿ƒä¿®æ”¹] ä½¿ç”¨ environment æ›¿ä»£ env_file
    environment:
      # ----------------------------------------
      # ğŸ”‘ æ ¸å¿ƒè´¦å·é…ç½® (å¿…å¡«)
      # ----------------------------------------
      - EPIC_EMAIL=ä½ çš„é‚®ç®±@example.com
      - EPIC_PASSWORD=ä½ çš„å¯†ç 
      # âš ï¸ æ³¨æ„ï¼šGemini API Key å¿…é¡»å¡«å†™
      - GEMINI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxx

      # ----------------------------------------
      # ğŸ¤– AiHubMix / Gemini é…ç½® (é€‰å¡«)
      # ----------------------------------------
      # å¦‚æœä½¿ç”¨å®˜æ–¹æ¥å£ï¼Œå¡« https://generativelanguage.googleapis.com
      - GEMINI_BASE_URL=https://aihubmix.com
      # æ¨èä½¿ç”¨ gemini-2.5-pro ä»¥è·å¾—æ›´å¥½çš„è¯†åˆ«èƒ½åŠ›
      - GEMINI_MODEL=gemini-2.5-pro

      # ----------------------------------------
      # âš™ï¸ é«˜çº§è¿è¡Œå‚æ•° (ä¿æŒé»˜è®¤å³å¯)
      # ----------------------------------------
      # æ˜¯å¦ç¦ç”¨è´å¡å°”æ›²çº¿è½¨è¿¹ (é»˜è®¤ true)
      - DISABLE_BEZIER_TRAJECTORY=true
      
      # ç½‘ç»œè¾ƒå·®æ—¶å¯é€‚å½“è°ƒå¤§è¶…æ—¶æ—¶é—´ (ç§’)
      - EXECUTION_TIMEOUT=120
      - RESPONSE_TIMEOUT=30
      
      # å¤±è´¥è‡ªåŠ¨é‡è¯•
      - RETRY_ON_FAILURE=true
      
      # éªŒè¯ç æ¸²æŸ“ç­‰å¾…æ—¶é—´ (æ¯«ç§’)
      - WAIT_FOR_CHALLENGE_VIEW_TO_RENDER_MS=1500
      
      # å¯ç”¨çº¦æŸç¼–ç 
      - CONSTRAINT_RESPONSE_SCHEMA=true
      
      # æŒ‡å®šå„ç±»ä»»åŠ¡ä½¿ç”¨çš„ AI æ¨¡å‹ (é»˜è®¤å³å¯)
      - CHALLENGE_CLASSIFIER_MODEL=gemini-2.5-flash
      - IMAGE_CLASSIFIER_MODEL=gemini-2.5-pro
      - SPATIAL_POINT_REASONER_MODEL=gemini-2.5-pro
      - SPATIAL_PATH_REASONER_MODEL=gemini-2.5-pro
      
      # æ€è€ƒé¢„ç®— (Token)
      - IMAGE_CLASSIFIER_THINKING_BUDGET=970
      - SPATIAL_POINT_THINKING_BUDGET=1387
      - SPATIAL_PATH_THINKING_BUDGET=1652

    # âœ… æ•°æ®æŒä¹…åŒ–
    volumes:
      - "./volumes/:/app/app/volumes/"

    entrypoint: [ "/usr/bin/tini", "--" ]
    command: xvfb-run --auto-servernum --server-num=1 --server-args='-screen 0, 1920x1080x24' uv run app/deploy.py

    # èµ„æºé™åˆ¶
    mem_limit: 4g
    shm_size: '2gb'
